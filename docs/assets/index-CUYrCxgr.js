(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const o=Array(9).fill(null),p=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];let g=0,h=0,i=null,l=!0;const y=()=>{document.getElementById("user-score").textContent=g,document.getElementById("pc-score").textContent=h},u=()=>{const e=document.getElementById("startmove");l?i===0?e.textContent="User's turn":e.textContent="PC's turn":e.textContent="Partita terminata"},a=e=>{const t=document.getElementById("restart-button");t.disabled=!e},v=()=>{o.fill(null),document.querySelectorAll(".button").forEach(e=>{e.classList.remove("cross","circle")}),i=Math.floor(Math.random()*2),l=!0,u(),a(!1),E(),i===1&&setTimeout(L,500)},d=e=>{const t=document.getElementById("popup"),n=document.getElementById("popup-message");n.textContent=e,t.classList.remove("d-none")},E=()=>{document.getElementById("popup").classList.add("d-none")},B=(e,t)=>{!l||o[t]||i!==0||(M(e,t,"circle"),P()?setTimeout(()=>{d("User wins!"),g++,y(),l=!1,u(),a(!0)},100):b()?setTimeout(()=>{d("TIE!"),l=!1,u(),a(!0)},100):I())},P=()=>p.some(([e,t,n])=>o[e]&&o[e]===o[t]&&o[e]===o[n]),b=()=>o.every(e=>e!==null),m=e=>{for(const[t,n,c]of p){if(o[t]===e&&o[n]===e&&o[c]===null)return c;if(o[t]===e&&o[c]===e&&o[n]===null)return n;if(o[n]===e&&o[c]===e&&o[t]===null)return t}return null},T=()=>Math.random()<.6,L=()=>{if(!l||i!==1)return;let e=m("cross");if(e===null&&T()&&(e=m("circle")),e===null){const t=o.map((n,c)=>n===null?c:null).filter(n=>n!==null);t.length&&(e=t[Math.floor(Math.random()*t.length)])}e!==null&&C(e)},C=e=>{const t=document.querySelector(`span[data-pos='${e}']`);t&&(M(t,e,"cross"),P()?setTimeout(()=>{d("PC wins!"),h++,y(),l=!1,u(),a(!0)},100):b()?setTimeout(()=>{d("TIE!"),l=!1,u(),a(!0)},100):I())},M=(e,t,n)=>{e.classList.add(n),o[t]=n},I=()=>{i=1-i,u(),i===1&&setTimeout(L,500)},w=()=>v();document.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("button")){const n=t.dataset.pos;l?B(t,n):d("Game over. Please restart the game.")}});document.getElementById("popup-ok-button").addEventListener("click",E);document.getElementById("restart-button").addEventListener("click",w);v();
